<!DOCTYPE html>
<html>
    
    <head>
<script>
function getpersonne(){
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function(){
                if (xhttp.readyState == 4 && xhttp.status == 200){
                    var pers = JSON.parse(xhttp.responseText);
                  //  console.log(pers[0]);
                    var tr = document.createElement("tr");
                    pers.forEach(element => {
                        console.log(element.nom)
                        var tr=document.createElement("tr");
                        var td=document.createElement("td");   
                        document.getElementById("tb").appendChild(tr);
                        var t= tr.appendChild(td);
                        t.textContent=element.nom;
                        var t= tr.appendChild(td);

                        var td=document.createElement("td"); 
                        var t= tr.appendChild(td);  
                        t.textContent=element.prenom;
                        var t= tr.appendChild(td);


                        var td=document.createElement("td"); 
                        var t= tr.appendChild(td);  
                        t.textContent=element.email;
                        var t= tr.appendChild(td);

  
                        
                    });
               // document.getElementById("r").textContent=pers[0].nom;
                        
                        };
                        
                       
                    };
                    
                
                xhttp.open("GET", "http://localhost:4000", true);
                xhttp.send();}




      
            function post(){
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function(){
                if (xhttp.readyState == 4){
                    if (xhttp.status == 200){
                        
                        
                    
                    }
                }
            }
            var name=document.getElementById("fname").value;
            var lnane=document.getElementById("lname").value;
            var mail=document.getElementById("email").value;
            
            
            xhttp.open("POST", "http://localhost:4000", true);
            xhttp2.send(JSON.stringify({
                                            "nom":name,
                                            "prenom":lname,
                                            "email":mail
                                        }));
         }          

         function sup(){
            var del=document.getElementById
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function(){
                if (xhttp.readyState == 4){
                    
                }
            }
            
            
            xhttp.open("DELETE", "http://localhost:4000", true);
            xhttp2.send();
         
         }



</script>
</head>


<body onload="getpersonne()">



<form action="">
  <label for="fname"> name:</label><br>
  <input type="text" id="fname" name="fname" ><br>
  <label for="lname">Last name:</label><br>
  <input type="text" id="lname" name="lname" ><br>
  <label for="email"> email:</label><br>
  <input type="text" id="email" name="email" ><br><br>
  <input type="submit" value="Submit" onclick="post()">
  <input type="submit" value="Suprimmer" onclick="su()">
</form> 

<table id ="tb">
    <tr>
        <th>nom</th>
        <th>prenom</th>
        <th>email</th>
    </tr>

</table>

</body>
</html>
